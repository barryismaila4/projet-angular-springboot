{"ast":null,"code":"import { Validators } from '@angular/forms';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/forms\";\nimport * as i2 from \"../../../services/dance.service\";\nimport * as i3 from \"@angular/router\";\nexport class CourseUpdateComponent {\n  constructor(fb, danceService, router, route) {\n    this.fb = fb;\n    this.danceService = danceService;\n    this.router = router;\n    this.route = route;\n    this.danceSchools = [];\n    this.courseForm = this.fb.group({\n      title: ['', Validators.required],\n      contenu: ['', Validators.required],\n      instructor: ['', Validators.required],\n      danceSchoolId: [null, Validators.required]\n    });\n  }\n  ngOnInit() {\n    this.courseId = +this.route.snapshot.paramMap.get('id'); // Récupérer l'ID du cours\n    this.loadDanceSchools();\n    this.loadCourse();\n  }\n  loadDanceSchools() {\n    this.danceService.getAllDanceSchools().subscribe({\n      next: data => {\n        this.danceSchools = data;\n      },\n      error: err => {\n        console.error('Erreur lors de la récupération des écoles de danse', err);\n      }\n    });\n  }\n  loadCourse() {\n    this.danceService.getCourseById(this.courseId).subscribe({\n      next: course => {\n        this.courseForm.patchValue({\n          title: course.title,\n          contenu: course.contenu,\n          instructor: course.instructor,\n          danceSchoolId: course.danceSchool.id // Associer l'école de danse\n        });\n      },\n\n      error: err => {\n        console.error('Erreur lors de la récupération du cours', err);\n      }\n    });\n  }\n  onSubmit() {\n    if (this.courseForm.valid) {\n      const updatedCourse = {\n        id: this.courseId,\n        title: this.courseForm.value.title,\n        contenu: this.courseForm.value.contenu,\n        instructor: this.courseForm.value.instructor,\n        danceSchool: {\n          id: this.courseForm.value.danceSchoolId\n        }\n      };\n      this.danceService.updateCourse(this.courseId, updatedCourse).subscribe({\n        next: () => {\n          this.router.navigate(['crud/course-list']); // Redirection vers la liste des cours\n        },\n\n        error: err => {\n          console.error('Erreur lors de la mise à jour du cours', err);\n        }\n      });\n    } else {\n      console.error('Le formulaire n\\'est pas valide');\n    }\n  }\n  static {\n    this.ɵfac = function CourseUpdateComponent_Factory(t) {\n      return new (t || CourseUpdateComponent)(i0.ɵɵdirectiveInject(i1.FormBuilder), i0.ɵɵdirectiveInject(i2.DanceService), i0.ɵɵdirectiveInject(i3.Router), i0.ɵɵdirectiveInject(i3.ActivatedRoute));\n    };\n  }\n  static {\n    this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: CourseUpdateComponent,\n      selectors: [[\"app-course-update\"]],\n      decls: 2,\n      vars: 0,\n      template: function CourseUpdateComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"p\");\n          i0.ɵɵtext(1, \"course-update works!\");\n          i0.ɵɵelementEnd();\n        }\n      },\n      styles: [\"\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ== */\"]\n    });\n  }\n}","map":{"version":3,"mappings":"AACA,SAAiCA,UAAU,QAAQ,gBAAgB;;;;;AAWnE,OAAM,MAAOC,qBAAqB;EAKhCC,YACUC,EAAe,EACfC,YAA0B,EAC1BC,MAAc,EACdC,KAAqB;IAHrB,OAAE,GAAFH,EAAE;IACF,iBAAY,GAAZC,YAAY;IACZ,WAAM,GAANC,MAAM;IACN,UAAK,GAALC,KAAK;IAPf,iBAAY,GAAkB,EAAE;IAS9B,IAAI,CAACC,UAAU,GAAG,IAAI,CAACJ,EAAE,CAACK,KAAK,CAAC;MAC9BC,KAAK,EAAE,CAAC,EAAE,EAAET,UAAU,CAACU,QAAQ,CAAC;MAChCC,OAAO,EAAE,CAAC,EAAE,EAAEX,UAAU,CAACU,QAAQ,CAAC;MAClCE,UAAU,EAAE,CAAC,EAAE,EAAEZ,UAAU,CAACU,QAAQ,CAAC;MACrCG,aAAa,EAAE,CAAC,IAAI,EAAEb,UAAU,CAACU,QAAQ;KAC1C,CAAC;EACJ;EAEAI,QAAQ;IACN,IAAI,CAACC,QAAQ,GAAG,CAAC,IAAI,CAACT,KAAK,CAACU,QAAQ,CAACC,QAAQ,CAACC,GAAG,CAAC,IAAI,CAAE,CAAC,CAAC;IAC1D,IAAI,CAACC,gBAAgB,EAAE;IACvB,IAAI,CAACC,UAAU,EAAE;EACnB;EAEAD,gBAAgB;IACd,IAAI,CAACf,YAAY,CAACiB,kBAAkB,EAAE,CAACC,SAAS,CAAC;MAC/CC,IAAI,EAAGC,IAAI,IAAI;QACb,IAAI,CAACC,YAAY,GAAGD,IAAI;MAC1B,CAAC;MACDE,KAAK,EAAGC,GAAG,IAAI;QACbC,OAAO,CAACF,KAAK,CAAC,oDAAoD,EAAEC,GAAG,CAAC;MAC1E;KACD,CAAC;EACJ;EAEAP,UAAU;IACR,IAAI,CAAChB,YAAY,CAACyB,aAAa,CAAC,IAAI,CAACd,QAAQ,CAAC,CAACO,SAAS,CAAC;MACvDC,IAAI,EAAGO,MAAM,IAAI;QACf,IAAI,CAACvB,UAAU,CAACwB,UAAU,CAAC;UACzBtB,KAAK,EAAEqB,MAAM,CAACrB,KAAK;UACnBE,OAAO,EAAEmB,MAAM,CAACnB,OAAO;UACvBC,UAAU,EAAEkB,MAAM,CAAClB,UAAU;UAC7BC,aAAa,EAAEiB,MAAM,CAACE,WAAW,CAACC,EAAE,CAAC;SACtC,CAAC;MACJ,CAAC;;MACDP,KAAK,EAAGC,GAAG,IAAI;QACbC,OAAO,CAACF,KAAK,CAAC,yCAAyC,EAAEC,GAAG,CAAC;MAC/D;KACD,CAAC;EACJ;EAEAO,QAAQ;IACN,IAAI,IAAI,CAAC3B,UAAU,CAAC4B,KAAK,EAAE;MACzB,MAAMC,aAAa,GAAW;QAC5BH,EAAE,EAAE,IAAI,CAAClB,QAAQ;QACjBN,KAAK,EAAE,IAAI,CAACF,UAAU,CAAC8B,KAAK,CAAC5B,KAAK;QAClCE,OAAO,EAAE,IAAI,CAACJ,UAAU,CAAC8B,KAAK,CAAC1B,OAAO;QACtCC,UAAU,EAAE,IAAI,CAACL,UAAU,CAAC8B,KAAK,CAACzB,UAAU;QAC5CoB,WAAW,EAAE;UAAEC,EAAE,EAAE,IAAI,CAAC1B,UAAU,CAAC8B,KAAK,CAACxB;QAAa;OACvD;MAED,IAAI,CAACT,YAAY,CAACkC,YAAY,CAAC,IAAI,CAACvB,QAAQ,EAAEqB,aAAa,CAAC,CAACd,SAAS,CAAC;QACrEC,IAAI,EAAE,MAAK;UACT,IAAI,CAAClB,MAAM,CAACkC,QAAQ,CAAC,CAAC,kBAAkB,CAAC,CAAC,CAAC,CAAC;QAC9C,CAAC;;QACDb,KAAK,EAAGC,GAAG,IAAI;UACbC,OAAO,CAACF,KAAK,CAAC,wCAAwC,EAAEC,GAAG,CAAC;QAC9D;OACD,CAAC;KACH,MAAM;MACLC,OAAO,CAACF,KAAK,CAAC,iCAAiC,CAAC;;EAEpD;;;uBAzEWzB,qBAAqB;IAAA;EAAA;;;YAArBA,qBAAqB;MAAAuC;MAAAC;MAAAC;MAAAC;QAAA;UCZlCC,yBAAG;UAAAA,oCAAoB;UAAAA,iBAAI","names":["Validators","CourseUpdateComponent","constructor","fb","danceService","router","route","courseForm","group","title","required","contenu","instructor","danceSchoolId","ngOnInit","courseId","snapshot","paramMap","get","loadDanceSchools","loadCourse","getAllDanceSchools","subscribe","next","data","danceSchools","error","err","console","getCourseById","course","patchValue","danceSchool","id","onSubmit","valid","updatedCourse","value","updateCourse","navigate","selectors","decls","vars","template","i0"],"sourceRoot":"","sources":["C:\\Users\\htismaila4\\Desktop\\Spring-Angular\\dancefrontend\\src\\app\\src\\app\\backofficecrud\\course\\course-update\\course-update.component.ts","C:\\Users\\htismaila4\\Desktop\\Spring-Angular\\dancefrontend\\src\\app\\src\\app\\backofficecrud\\course\\course-update\\course-update.component.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { DanceService } from '../../../services/dance.service';\nimport { Course } from '../../../models/course.model';\nimport { DanceSchool } from '../../../models/dance-school.model';\n\n@Component({\n  selector: 'app-course-update',\n  templateUrl: './course-update.component.html',\n  styleUrls: ['./course-update.component.css']\n})\nexport class CourseUpdateComponent implements OnInit {\n  courseForm: FormGroup;\n  danceSchools: DanceSchool[] = [];\n  courseId: number;\n\n  constructor(\n    private fb: FormBuilder,\n    private danceService: DanceService,\n    private router: Router,\n    private route: ActivatedRoute\n  ) {\n    this.courseForm = this.fb.group({\n      title: ['', Validators.required],\n      contenu: ['', Validators.required],\n      instructor: ['', Validators.required],\n      danceSchoolId: [null, Validators.required]\n    });\n  }\n\n  ngOnInit(): void {\n    this.courseId = +this.route.snapshot.paramMap.get('id')!; // Récupérer l'ID du cours\n    this.loadDanceSchools();\n    this.loadCourse();\n  }\n\n  loadDanceSchools(): void {\n    this.danceService.getAllDanceSchools().subscribe({\n      next: (data) => {\n        this.danceSchools = data;\n      },\n      error: (err) => {\n        console.error('Erreur lors de la récupération des écoles de danse', err);\n      }\n    });\n  }\n\n  loadCourse(): void {\n    this.danceService.getCourseById(this.courseId).subscribe({\n      next: (course) => {\n        this.courseForm.patchValue({\n          title: course.title,\n          contenu: course.contenu,\n          instructor: course.instructor,\n          danceSchoolId: course.danceSchool.id // Associer l'école de danse\n        });\n      },\n      error: (err) => {\n        console.error('Erreur lors de la récupération du cours', err);\n      }\n    });\n  }\n\n  onSubmit(): void {\n    if (this.courseForm.valid) {\n      const updatedCourse: Course = {\n        id: this.courseId,\n        title: this.courseForm.value.title,\n        contenu: this.courseForm.value.contenu,\n        instructor: this.courseForm.value.instructor,\n        danceSchool: { id: this.courseForm.value.danceSchoolId } as DanceSchool\n      };\n\n      this.danceService.updateCourse(this.courseId, updatedCourse).subscribe({\n        next: () => {\n          this.router.navigate(['crud/course-list']); // Redirection vers la liste des cours\n        },\n        error: (err) => {\n          console.error('Erreur lors de la mise à jour du cours', err);\n        }\n      });\n    } else {\n      console.error('Le formulaire n\\'est pas valide');\n    }\n  }\n}","<p>course-update works!</p>\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}